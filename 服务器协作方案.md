# æ—¥è‚¡é¢„æµ‹ç³»ç»Ÿ - æœåŠ¡å™¨ä¸æœ¬åœ°åä½œæ–¹æ¡ˆ

## ğŸ¯ æ–¹æ¡ˆé€‰æ‹©

### æ–¹æ¡ˆ1: Git Results åˆ†æ”¯ï¼ˆæ¨èâ­ï¼‰
**é€‚åˆ**: å°è§„æ¨¡æ•°æ®ï¼Œç®€å•åŒæ­¥

**ä¼˜ç‚¹**:
- âœ… ä¸éœ€è¦é¢å¤–æœåŠ¡
- âœ… ä½¿ç”¨GitHubè‡ªåŠ¨å¤‡ä»½
- âœ… æœ¬åœ°åŒæ­¥ç®€å•

**ç¼ºç‚¹**:
- âš ï¸ å¤§é‡æ•°æ®ä¼šè®©ä»“åº“å˜å¤§
- âš ï¸ éœ€è¦æ‰‹åŠ¨æ¨é€

---

### æ–¹æ¡ˆ2: rsync åŒæ­¥
**é€‚åˆ**: æœåŠ¡å™¨æœ‰SSHè®¿é—®æƒé™

**ä¼˜ç‚¹**:
- âœ… å¢é‡åŒæ­¥ï¼Œé€Ÿåº¦å¿«
- âœ… å¯ä»¥å®šæ—¶è‡ªåŠ¨åŒæ­¥
- âœ… ä¸å ç”¨Gitä»“åº“ç©ºé—´

**ç¼ºç‚¹**:
- âš ï¸ éœ€è¦æœåŠ¡å™¨SSHæƒé™
- âš ï¸ éœ€è¦é…ç½®SSHå¯†é’¥

---

### æ–¹æ¡ˆ3: äº‘å­˜å‚¨åŒæ­¥ï¼ˆS3/é˜¿é‡Œäº‘OSSï¼‰
**é€‚åˆ**: ä¸“ä¸šéƒ¨ç½²ï¼Œå¤§è§„æ¨¡æ•°æ®

**ä¼˜ç‚¹**:
- âœ… å¯é æ€§é«˜
- âœ… è®¿é—®é€Ÿåº¦å¿«
- âœ… æ”¯æŒå¤šè®¾å¤‡åŒæ­¥

**ç¼ºç‚¹**:
- âš ï¸ éœ€è¦ä»˜è´¹
- âš ï¸ é…ç½®å¤æ‚

---

## ğŸ“¦ æ–¹æ¡ˆ1å®æ–½: Git Results åˆ†æ”¯

### ç›®å½•ç»“æ„
```
news/                      # ä¸»åˆ†æ”¯ (main)
â”œâ”€â”€ news_today.py         # ä»£ç 
â”œâ”€â”€ backtest.py
â”œâ”€â”€ config.py
â”œâ”€â”€ .env.example
â””â”€â”€ README.md

news/                      # results åˆ†æ”¯
â”œâ”€â”€ predictions/           # é¢„æµ‹æ•°æ®
â”œâ”€â”€ reports/              # æŠ¥å‘Š
â””â”€â”€ backtest_results/     # å›æµ‹ç»“æœ
```

### æœåŠ¡å™¨ç«¯é…ç½®

#### 1. åˆå§‹åŒ–resultsåˆ†æ”¯
```bash
cd ~/news

# åˆ›å»ºç‹¬ç«‹çš„resultsåˆ†æ”¯ï¼ˆæ— å†å²ï¼‰
git checkout --orphan results
git rm -rf .

# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p predictions reports backtest_results
touch predictions/.gitkeep
touch reports/.gitkeep
touch backtest_results/.gitkeep

# åˆ›å»º .gitignoreï¼ˆresultsåˆ†æ”¯ä¸“ç”¨ï¼‰
cat > .gitignore << 'EOF'
# ç³»ç»Ÿæ–‡ä»¶
.DS_Store
*.log
.env

# Python
__pycache__/
*.pyc

# ä¸´æ—¶æ–‡ä»¶
weekend_cache/
EOF

# æäº¤
git add .
git commit -m "Initialize results branch"
git push origin results

# åˆ‡å›ä¸»åˆ†æ”¯
git checkout main
```

#### 2. åˆ›å»ºç»“æœæ¨é€è„šæœ¬
```bash
# åœ¨æœåŠ¡å™¨ä¸Šåˆ›å»º push_results.sh
cat > ~/news/push_results.sh << 'EOF'
#!/bin/bash

cd ~/news

# åˆ‡æ¢åˆ°resultsåˆ†æ”¯
git checkout results

# å¤åˆ¶ç»“æœæ–‡ä»¶ï¼ˆä»mainåˆ†æ”¯çš„å·¥ä½œç›®å½•ï¼‰
cp -r predictions/* predictions/ 2>/dev/null || true
cp -r report_*/* reports/ 2>/dev/null || true
cp backtest_result_*.json backtest_results/ 2>/dev/null || true

# æäº¤å¹¶æ¨é€
git add predictions/ reports/ backtest_results/
git commit -m "Update results: $(date '+%Y-%m-%d %H:%M:%S')" || true
git push origin results

# åˆ‡å›mainåˆ†æ”¯
git checkout main

echo "âœ… ç»“æœå·²æ¨é€åˆ°GitHub"
EOF

chmod +x ~/news/push_results.sh
```

#### 3. æ·»åŠ åˆ°crontab
```bash
crontab -e

# æ¯å¤©è¿è¡Œé¢„æµ‹ï¼Œç„¶åæ¨é€ç»“æœ
0 0 * * * cd ~/news && python3 news_today.py >> logs/news.log 2>&1
5 0 * * * cd ~/news && ./push_results.sh >> logs/push.log 2>&1

# æ¯å‘¨è¿è¡Œå›æµ‹ï¼Œç„¶åæ¨é€ç»“æœ
0 1 * * 0 cd ~/news && python3 backtest.py >> logs/backtest.log 2>&1
5 1 * * 0 cd ~/news && ./push_results.sh >> logs/push.log 2>&1
```

### æœ¬åœ°ç«¯é…ç½®

#### 1. å…‹éš†ä¸¤ä¸ªåˆ†æ”¯
```bash
# ä¸»ä»“åº“ï¼ˆä»£ç ï¼‰
git clone https://github.com/yourusername/news-prediction.git news
cd news

# åˆ›å»ºresultså·¥ä½œæ ‘ï¼ˆåœ¨å•ç‹¬ç›®å½•ï¼‰
git worktree add ../news-results results

# ç°åœ¨ä½ æœ‰ä¸¤ä¸ªç›®å½•ï¼š
# news/          - mainåˆ†æ”¯ï¼ˆä»£ç ï¼‰
# news-results/  - resultsåˆ†æ”¯ï¼ˆç»“æœï¼‰
```

#### 2. åŒæ­¥ç»“æœåˆ°æœ¬åœ°
```bash
# åˆ›å»ºæœ¬åœ°åŒæ­¥è„šæœ¬
cat > ~/news/pull_results.sh << 'EOF'
#!/bin/bash

cd ~/news-results
git pull origin results

echo "âœ… ç»“æœå·²åŒæ­¥åˆ°æœ¬åœ°"
echo "   ä½ç½®: ~/news-results/"
EOF

chmod +x ~/news/pull_results.sh
```

#### 3. æŸ¥çœ‹ç»“æœ
```bash
# æ‰‹åŠ¨åŒæ­¥
./pull_results.sh

# æŸ¥çœ‹æœ€æ–°é¢„æµ‹
ls -lt ~/news-results/predictions/ | head -10

# æŸ¥çœ‹æœ€æ–°æŠ¥å‘Š
ls -lt ~/news-results/reports/ | head -10

# æŸ¥çœ‹å›æµ‹ç»“æœ
ls -lt ~/news-results/backtest_results/ | head -10
```

---

## ğŸ“¦ æ–¹æ¡ˆ2å®æ–½: rsync åŒæ­¥

### æœåŠ¡å™¨ç«¯é…ç½®

#### 1. é…ç½®SSHå¯†é’¥ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
```bash
# åœ¨æœ¬åœ°ç”Ÿæˆå¯†é’¥ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ï¼‰
ssh-keygen -t ed25519 -C "your_email@example.com"

# å¤åˆ¶å…¬é’¥åˆ°æœåŠ¡å™¨
ssh-copy-id user@your-server.com
```

#### 2. æœåŠ¡å™¨ä¸Šæ­£å¸¸è¿è¡Œ
```bash
# crontabé…ç½®
0 0 * * * cd ~/news && python3 news_today.py
0 1 * * 0 cd ~/news && python3 backtest.py
```

### æœ¬åœ°ç«¯é…ç½®

#### 1. åˆ›å»ºåŒæ­¥è„šæœ¬
```bash
# åˆ›å»º sync_from_server.sh
cat > ~/sync_from_server.sh << 'EOF'
#!/bin/bash

SERVER="user@your-server.com"
REMOTE_DIR="~/news"
LOCAL_DIR="~/news-results"

# åˆ›å»ºæœ¬åœ°ç›®å½•
mkdir -p "$LOCAL_DIR"

# åŒæ­¥é¢„æµ‹ç»“æœ
rsync -avz --progress \
  "$SERVER:$REMOTE_DIR/predictions/" \
  "$LOCAL_DIR/predictions/"

# åŒæ­¥æŠ¥å‘Š
rsync -avz --progress \
  "$SERVER:$REMOTE_DIR/report_*" \
  "$LOCAL_DIR/reports/"

# åŒæ­¥å›æµ‹ç»“æœ
rsync -avz --progress \
  "$SERVER:$REMOTE_DIR/backtest_result_*.json" \
  "$LOCAL_DIR/backtest_results/"

echo "âœ… åŒæ­¥å®Œæˆ"
echo "   æœ¬åœ°ç›®å½•: $LOCAL_DIR"
EOF

chmod +x ~/sync_from_server.sh
```

#### 2. ä½¿ç”¨
```bash
# æ‰‹åŠ¨åŒæ­¥
./sync_from_server.sh

# æˆ–è®¾ç½®å®šæ—¶åŒæ­¥ï¼ˆæ¯å¤©æ—©ä¸Š8ç‚¹ï¼‰
crontab -e
0 8 * * * ~/sync_from_server.sh >> ~/sync.log 2>&1
```

---

## ğŸ“¦ æ–¹æ¡ˆ3å®æ–½: é˜¿é‡Œäº‘OSSåŒæ­¥

### æœåŠ¡å™¨ç«¯é…ç½®

#### 1. å®‰è£…ossutil
```bash
wget http://gosspublic.alicdn.com/ossutil/1.7.15/ossutil64
chmod 755 ossutil64
sudo mv ossutil64 /usr/local/bin/ossutil

# é…ç½®
ossutil config
# è¾“å…¥: AccessKey ID, AccessKey Secret, Endpoint
```

#### 2. åˆ›å»ºä¸Šä¼ è„šæœ¬
```bash
cat > ~/news/upload_to_oss.sh << 'EOF'
#!/bin/bash

BUCKET="oss://your-bucket-name/news-results"

# ä¸Šä¼ é¢„æµ‹
ossutil cp -r predictions/ "$BUCKET/predictions/" --update

# ä¸Šä¼ æŠ¥å‘Š
ossutil cp -r report_*/ "$BUCKET/reports/" --update

# ä¸Šä¼ å›æµ‹
ossutil cp backtest_result_*.json "$BUCKET/backtest_results/" --update

echo "âœ… å·²ä¸Šä¼ åˆ°OSS"
EOF

chmod +x ~/news/upload_to_oss.sh
```

#### 3. æ·»åŠ åˆ°crontab
```bash
crontab -e

# æ¯å¤©è¿è¡Œåä¸Šä¼ 
0 0 * * * cd ~/news && python3 news_today.py
10 0 * * * cd ~/news && ./upload_to_oss.sh
```

### æœ¬åœ°ç«¯é…ç½®

#### 1. å®‰è£…ossutilï¼ˆåŒæœåŠ¡å™¨ï¼‰

#### 2. åˆ›å»ºä¸‹è½½è„šæœ¬
```bash
cat > ~/download_from_oss.sh << 'EOF'
#!/bin/bash

BUCKET="oss://your-bucket-name/news-results"
LOCAL_DIR="~/news-results"

mkdir -p "$LOCAL_DIR"

# ä¸‹è½½æ‰€æœ‰ç»“æœ
ossutil cp -r "$BUCKET/" "$LOCAL_DIR/" --update

echo "âœ… å·²ä»OSSåŒæ­¥åˆ°æœ¬åœ°"
EOF

chmod +x ~/download_from_oss.sh
```

---

## ğŸ¨ å¯è§†åŒ–æ–¹æ¡ˆï¼ˆå¯é€‰ï¼‰

### åˆ›å»ºç®€å•çš„Webç•Œé¢

```bash
# åœ¨æœ¬åœ°åˆ›å»ºä¸€ä¸ªç®€å•çš„Flaskåº”ç”¨
pip install flask

# app.py
cat > ~/news-results/app.py << 'EOF'
from flask import Flask, render_template, jsonify
import json
import os
from pathlib import Path

app = Flask(__name__)

@app.route('/')
def index():
    # åˆ—å‡ºæœ€è¿‘çš„é¢„æµ‹
    predictions = sorted(Path('predictions').glob('*.json'), reverse=True)[:10]
    return render_template('index.html', predictions=predictions)

@app.route('/api/prediction/<date>')
def get_prediction(date):
    file_path = f'predictions/prediction_{date}.json'
    if os.path.exists(file_path):
        with open(file_path, 'r') as f:
            return jsonify(json.load(f))
    return jsonify({'error': 'Not found'}), 404

if __name__ == '__main__':
    app.run(debug=True, port=5000)
EOF

# å¯åŠ¨
cd ~/news-results
python app.py

# è®¿é—® http://localhost:5000
```

---

## ğŸ”§ æ¨èé…ç½®ï¼ˆç»¼åˆæ–¹æ¡ˆï¼‰

### æœåŠ¡å™¨ç«¯
```bash
# 1. è¿è¡Œé¢„æµ‹
0 0 * * * cd ~/news && python3 news_today.py

# 2. æ¨é€åˆ°Git resultsåˆ†æ”¯ï¼ˆå¤‡ä»½ï¼‰
5 0 * * * cd ~/news && ./push_results.sh

# 3. æ¯å‘¨å›æµ‹
0 1 * * 0 cd ~/news && python3 backtest.py
5 1 * * 0 cd ~/news && ./push_results.sh
```

### æœ¬åœ°ç«¯
```bash
# é€‰é¡¹1: ä»Gitæ‹‰å–ï¼ˆç®€å•ï¼‰
cd ~/news-results && git pull origin results

# é€‰é¡¹2: rsyncåŒæ­¥ï¼ˆå¿«é€Ÿï¼‰
./sync_from_server.sh

# é€‰é¡¹3: å¯åŠ¨Webç•Œé¢æŸ¥çœ‹ï¼ˆæ–¹ä¾¿ï¼‰
cd ~/news-results && python app.py
```

---

## ğŸ“‹ å®Œæ•´æµç¨‹ç¤ºä¾‹

### 1. åˆå§‹è®¾ç½®ï¼ˆåªéœ€ä¸€æ¬¡ï¼‰

**æœåŠ¡å™¨:**
```bash
git clone https://github.com/yourusername/news-prediction.git news
cd news
cp .env.example .env
nano .env  # å¡«å…¥APIå¯†é’¥
git checkout --orphan results
# åˆå§‹åŒ–resultsåˆ†æ”¯...
git checkout main
```

**æœ¬åœ°:**
```bash
git clone https://github.com/yourusername/news-prediction.git news
git worktree add ../news-results results
```

### 2. æ—¥å¸¸ä½¿ç”¨

**è‡ªåŠ¨å‘ç”Ÿï¼ˆæœåŠ¡å™¨ï¼‰:**
- æ¯å¤©0:00è¿è¡Œé¢„æµ‹
- æ¯å¤©0:05æ¨é€ç»“æœåˆ°GitHub

**æœ¬åœ°æŸ¥çœ‹:**
```bash
# æ–¹å¼1: æ›´æ–°results
cd ~/news-results && git pull

# æ–¹å¼2: ç›´æ¥æŸ¥çœ‹
cd ~/news-results/predictions
cat prediction_2026-02-05.json
```

---

**åˆ›å»ºæ—¶é—´**: 2026-02-05
**æ¨èæ–¹æ¡ˆ**: Git Resultsåˆ†æ”¯ + rsyncå¤‡ä»½
